"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4594],{9122:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"tutorials/tutorial-basics/build-it","title":"Build the control plane","description":"Now let\'s build and deploy this component. Before we do, we have to modify one other file. Open up the hello-cdk.ts file in the bin directory, and replace everything that\'s in there with the following contents:","source":"@site/docs/tutorials/tutorial-basics/build-it.md","sourceDirName":"tutorials/tutorial-basics","slug":"/tutorials/tutorial-basics/build-it","permalink":"/sbt-aws/docs/tutorials/tutorial-basics/build-it","draft":false,"unlisted":false,"editUrl":"https://github.com/awslabs/sbt-aws/blob/main/website/docs/tutorials/tutorial-basics/build-it.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Create the control plane","permalink":"/sbt-aws/docs/tutorials/tutorial-basics/create-control-plane"},"next":{"title":"Create the application plane","permalink":"/sbt-aws/docs/tutorials/tutorial-basics/create-application-plane"}}');var a=n(4848),i=n(8453);const s={sidebar_position:4},l="Build the control plane",r={},c=[];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"build-the-control-plane",children:"Build the control plane"})}),"\n",(0,a.jsxs)(t.p,{children:["Now let's build and deploy this component. Before we do, we have to modify one other file. Open up the ",(0,a.jsx)(t.code,{children:"hello-cdk.ts"})," file in the bin directory, and replace everything that's in there with the following contents:"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"#!/usr/bin/env node\nimport 'source-map-support/register';\nimport * as cdk from 'aws-cdk-lib';\nimport { ControlPlaneStack } from '../lib/control-plane';\n// import { AppPlaneStack } from '../lib/app-plane';\n\nconst app = new cdk.App();\nconst controlPlaneStack = new ControlPlaneStack(app, 'ControlPlaneStack');\n// const appPlaneStack = new AppPlaneStack(app, 'AppPlaneStack', {\n//   eventManager: controlPlaneStack.eventManager,\n// });\n"})}),"\n",(0,a.jsx)(t.p,{children:"Notice we're leaving a few lines commented out here, we'll come back to those later when we discuss the application plane. Ensure everything is saved, then from the root of your hello-cdk project, run the following:"}),"\n",(0,a.jsx)(t.admonition,{type:"warning",children:(0,a.jsx)(t.p,{children:"Because our control plane deploys Lambda functions, you'll need Docker installed to build and deploy this CDK stack"})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npm run build\ncdk bootstrap\ncdk deploy ControlPlaneStack\n"})}),"\n",(0,a.jsx)(t.p,{children:"This will kick of the synthesis of your CDK application to AWS CloudFormation, then deploy that CloudFormation. Behind the scenes, a lot is getting created. This construct not only stands up the surface of our control plane API, using a new API Gateway component, it also deploys several services as AWS Lambda functions used for tenant provisioning and management."}),"\n",(0,a.jsx)(t.p,{children:"Feel free to open your AWS Console and take a look at the following (ensure you're in the same region you deployed to):"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://console.aws.amazon.com/lambda/home",children:"AWS Lambda"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://console.aws.amazon.com/cognito/v2/idp/user-pools",children:"Amazon Cognito"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"https://console.aws.amazon.com/apigateway/main/apis",children:"API Gateway"})}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:"Once done, we now have the left side of our conceptual diagram deployed, and we did it with just a few constructs. It deployed not only the API surface of our control plane, but also wired it up to EventBridge. Next, we'll start deploy the application plane, and connect it to the same EventBridge bus, so we can act upon those control plane messages."})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>l});var o=n(6540);const a={},i=o.createContext(a);function s(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);