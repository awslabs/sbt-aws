<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-partners/isv-integrations/amberflo" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Amberflo | SaaS Builder Toolkit for AWS (SBT-AWS)</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://awslabs.github.io/sbt-aws/docs/partners/isv-integrations/amberflo"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Amberflo | SaaS Builder Toolkit for AWS (SBT-AWS)"><meta data-rh="true" name="description" content="A cloud-native solution that integrates with SaaS products to enable real-time metering and usage-based billing for GenAI and SaaS applications."><meta data-rh="true" property="og:description" content="A cloud-native solution that integrates with SaaS products to enable real-time metering and usage-based billing for GenAI and SaaS applications."><link data-rh="true" rel="icon" href="/sbt-aws/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://awslabs.github.io/sbt-aws/docs/partners/isv-integrations/amberflo"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/sbt-aws/docs/partners/isv-integrations/amberflo" hreflang="en"><link data-rh="true" rel="alternate" href="https://awslabs.github.io/sbt-aws/docs/partners/isv-integrations/amberflo" hreflang="x-default"><link rel="stylesheet" href="/sbt-aws/assets/css/styles.cb016cba.css">
<script src="/sbt-aws/assets/js/runtime~main.8ac6ae81.js" defer="defer"></script>
<script src="/sbt-aws/assets/js/main.3ddc1fcd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/sbt-aws/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sbt-aws/"><div class="navbar__logo"><img src="/sbt-aws/img/logo.svg" alt="sbt logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/sbt-aws/img/logo.svg" alt="sbt logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SBT-AWS</b></a><a class="navbar__item navbar__link" href="/sbt-aws/docs/category/sbt-tutorial---basics">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sbt-aws/docs/category/isv-partner-integrations">Partner Integrations</a><a class="navbar__item navbar__link" href="/sbt-aws/docs/interfaces">Interfaces</a><a class="navbar__item navbar__link" href="/sbt-aws/docs/reference_architectures/eks-reference-architecture">Reference Architectures</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/sbt-aws/docs/category/isv-partner-integrations">ISV Partner Integrations</a><button aria-label="Collapse sidebar category &#x27;ISV Partner Integrations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sbt-aws/docs/partners/isv-integrations/amberflo">Amberflo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sbt-aws/docs/partners/isv-integrations/descope">Descope</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sbt-aws/docs/partners/isv-integrations/moesif">Moesif</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sbt-aws/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/sbt-aws/docs/category/isv-partner-integrations"><span itemprop="name">ISV Partner Integrations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Amberflo</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction</h1></header>
<p><a href="https://www.amberflo.io/" target="_blank" rel="noopener noreferrer">Amberflo</a> is a cloud-based platform designed to help businesses implement and manage metering, usage-based billing, and analytics for their SaaS (Software as a Service) products and services. Amberflo offers a robust platform for real-time tracking, metering and billing of usage events such as LLM tokens, API transactions, and consumption of compute, storage, and network resources, enabling precise billing based on actual usage. Whether you’re managing a subscription-based business model or billing customers per unique user, Amberflo’s billing cloud streamlines the invoicing process and integrates seamlessly with popular payment gateways like Stripe or ERP systems like Netsuite, ensuring smooth, automated customer invoicing and payment collection.</p>
<p>This module enables precise near real-time metering and usage based billing for any Data platforms, SaaS or AI applications. It extends AWS SaaS Builder ToolKit (SBT) capability by integrating Amberflo’s cloud native solution to enable builders to track, meter and bill usage events such as LLM tokens, API transactions, and consumption of compute, storage, and network resources in near real-time. With this integration, you can effortlessly implement a modern, usage-based billing for your SaaS and GenAI applications out-of-the-box.</p>
<h1>Installation instructions</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h2>
<ul>
<li>
<p>Deploy a SBT Project: If you don&#x27;t already have a SBT project deployed, follow AWS SBT&#x27;s tutorial
to deploy the sample hello-cdk project with a ControlPlane and CoreApplicationPlane.</p>
</li>
<li>
<p>Amberflo Account: You need an Amberflo account for this project. If you don’t have an Amberflo
account, you can sign up for one here: <a href="https://www.amberflo.io/aws-saas-factory" target="_blank" rel="noopener noreferrer">Amberflo Signup</a>.</p>
</li>
<li>
<p>API Key Secret: After signing up, the Amberflo API Key must be stored as a secret in AWS Secrets
Manager. The application by default expects the secret to be created with the name
AmberfloApiKey. However, you can create a secret with your own custom name and pass it in as a
parameter to AmberfloMetering.</p>
<p><code>Secret Name:</code> The name of the secret in AWS Secrets Manager<br>
<code>Secret Key:</code> The key within the secret JSON that contains the API Key</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="obtaining-the-plugin">Obtaining the Plugin<a href="#obtaining-the-plugin" class="hash-link" aria-label="Direct link to Obtaining the Plugin" title="Direct link to Obtaining the Plugin">​</a></h2>
<p><em>Option 1:</em> Clone the repository</p>
<p><code>git clone https://github.com/amberflo/sbt-aws-amberflo.git</code></p>
<p><em>Option 2:</em> Download the latest release
Visit the <a href="https://github.com/amberflo/sbt-aws-amberflo/releases" target="_blank" rel="noopener noreferrer">sbt-aws-amberflo releases</a> and download the latest version.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-steps">Installation Steps<a href="#installation-steps" class="hash-link" aria-label="Direct link to Installation Steps" title="Direct link to Installation Steps">​</a></h2>
<p>Within your SBT project directory, install aws-sbt-amberflo via the following command:</p>
<p><code>npm install --save sbt-aws-amberflo</code></p>
<p><img decoding="async" loading="lazy" alt="amberflo-architecture.webp" src="/sbt-aws/assets/images/amberflo-architecture-bb8aaab1d36114c393848218b46100fd.webp" width="800" height="450" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-amberflometering-to-your-control-plane">Add AmberfloMetering to Your Control Plane<a href="#add-amberflometering-to-your-control-plane" class="hash-link" aria-label="Direct link to Add AmberfloMetering to Your Control Plane" title="Direct link to Add AmberfloMetering to Your Control Plane">​</a></h3>
<p>Instantiate the AmberfloMetering construct in your AWS CDK stack. Here’s an example TypeScript code snippet:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Stack </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;aws-cdk-lib&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Construct </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;constructs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> sbt </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@cdklabs/sbt-aws&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> AmberfloMetering </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;sbt-aws-amberflo&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ControlPlaneStack</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Stack</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Construct</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> props</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">any</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scope</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> amberfloMetering </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AmberfloMetering</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;AmberfloMetering&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      amberfloAPIKeySecretName</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;YourSecretName&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      amberfloAPIKeySecretId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;YourSecretId&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> controlPlane </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">sbt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ControlPlane</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ControlPlane&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      metering</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> amberfloMetering</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="provision-a-meter">Provision a Meter<a href="#provision-a-meter" class="hash-link" aria-label="Direct link to Provision a Meter" title="Direct link to Provision a Meter">​</a></h3>
<p>Once you deploy your updated stack, you can create and manage meters using the provided API endpoints. Here’s how you can create a meter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">METER=$(jq --null-input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;label&quot;: &quot;SBT Meter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;meterApiName&quot;: &quot;sbt-meter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;meterType&quot;: &quot;sum_of_all_usage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;creating meter...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl --request POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}meters&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &#x27;content-type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &quot;$METER&quot; | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above 3 properties are the required properties for creating a meter. You can also pass in additional properties while creating a meter. See more on creating meters in Amberflo.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-a-meter">Update a Meter<a href="#update-a-meter" class="hash-link" aria-label="Direct link to Update a Meter" title="Direct link to Update a Meter">​</a></h3>
<p>Once you deploy your updated stack, you can update meters using the provided API endpoint. Here’s how you can update a meter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">UPDATE_METER=$(jq --null-input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;label&quot;: &quot;SBT trial meter&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;meterApiName&quot;: &quot;sbt-trial&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;meterType&quot;: &quot;sum_of_all_usage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;updating meter...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl --request PUT \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}meters/&lt;meter-id&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &#x27;content-type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &quot;$UPDATE_METER&quot; | jq</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="get-a-meter">Get a Meter<a href="#get-a-meter" class="hash-link" aria-label="Direct link to Get a Meter" title="Direct link to Get a Meter">​</a></h3>
<p>You can get a meter by id using the provided API endpoint. Here’s how you can get a meter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --request GET \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}meters/&lt;meterId&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --silent | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="list-all-meters">List all Meters<a href="#list-all-meters" class="hash-link" aria-label="Direct link to List all Meters" title="Direct link to List all Meters">​</a></h3>
<p>You can list all meters using the provided API endpoint. Here’s how you can list all meter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --request GET \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}meters/&lt;meterId&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --silent | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-a-meter">Delete a Meter<a href="#delete-a-meter" class="hash-link" aria-label="Direct link to Delete a Meter" title="Direct link to Delete a Meter">​</a></h3>
<p>You can delete a meter by id using the provided API endpoint. Here’s how you can delete a meter:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}meters/&lt;meterId&gt;&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --silent | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ingest-usage-events">Ingest Usage Events<a href="#ingest-usage-events" class="hash-link" aria-label="Direct link to Ingest Usage Events" title="Direct link to Ingest Usage Events">​</a></h3>
<p>To ingest usage events, application or service in the application plane must emit events that represent usage metrics, which will be processed by the ingestUsageEventFunction Lambda function.</p>
<p>Event details must contain the following required properties:
●	tenantId: The identifier of the tenant to associate with the usage.
●	meterApiName: The name of the meter as used in the createMeter.
●	meterValue: The quantity or amount of usage to record for a tenant.
These properties are necessary to accurately track and attribute usage metrics. You can also pass in additional values for dimensions, if the meter has dimensions defined.</p>
<p>Example</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const putEventsResponse = eventManager.eventBus.putEvents({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entries: [{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    detail: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;tenantId&quot;: &lt;tenantId&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;meterApiName&quot;: &lt;meterApiName as used in create meter&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;meterValue&quot;: &lt;usage value that is to be recorded&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    detailType: DetailType.INGEST_USAGE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    source: eventManager.applicationPlaneEventSource,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The ingestUsageEventFunction Lambda function will be triggered to handle this event and send the data to Amberflo for processing.</p>
<p>Note: the eventManager is the eventManager passed to the CoreApplicationPlane</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetch-usage-data">Fetch Usage Data<a href="#fetch-usage-data" class="hash-link" aria-label="Direct link to Fetch Usage Data" title="Direct link to Fetch Usage Data">​</a></h3>
<p>To fetch usage data, use the API endpoint to retrieve data based on your meter API name:
Example</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">METER_API_NAME = &#x27;sbt-meter&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">START_TIME = 1724630400</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">END_TIME = 1724716800</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl --request GET \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}usage/&lt;meterId&gt;?meterApiName=${METER_API_NAME}&amp;startTimeInSeconds=${START_TIME}&amp;endTimeInSeconds=${END_TIME}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --silent | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The meterApiName id not provided in the query string will be fetched using the meterId path parameter. The startTimeInSeconds and endTimeInSeconds are optional and default to (current time - 24hrs) and current time.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="canceling-incorrect-usage-events">Canceling incorrect usage events<a href="#canceling-incorrect-usage-events" class="hash-link" aria-label="Direct link to Canceling incorrect usage events" title="Direct link to Canceling incorrect usage events">​</a></h3>
<p>There are occasions where a meter event source may send or report incorrect or erroneous meters. Amberflo provides the ability to cancel (undo) one or more meter events as needed. See detailed guide on canceling usage events.
Example</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FILTER=$(jq --null-input \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;id&quot;: &quot;sbt-filtering-rule&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;meterApiName&quot;: &quot;sbt-trial&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;ingestionTimeRange&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;startTimeInSeconds&quot;: 1724367600,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;endTimeInSeconds&quot;: 1724371200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;creating filtering rule for canceling usage events...&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl --request DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --url &quot;${CONTROL_PLANE_API_ENDPOINT}usage&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &quot;Authorization: Bearer ${ACCESS_TOKEN}&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --header &#x27;content-type: application/json&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --data &quot;$FILTER&quot; | jq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The id, meterApiName and ingestionTimeRange are required parameters.
The above command creates a filtering rule that cancels the events for the meter sbt-trial in the given time range. You can also cancel more specific events for specific tenants or based on specific dimensions etc. See the Amberflo API for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-examples">Usage Examples<a href="#usage-examples" class="hash-link" aria-label="Direct link to Usage Examples" title="Direct link to Usage Examples">​</a></h2>
<p>The Amberflo metering implementation provided in this repository allows ISVs to integrate Amberflo with their SBT-based applications. This enables ISVs to:</p>
<ul>
<li>Track and analyze usage metrics for their tenants</li>
<li>Create a more accurate and efficient billing process</li>
</ul>
<p>The AmberfloMetering construct deploys an AWS Lambda function to handle usage metering. It also provides a set of APIs for creating and updating meters, fetching usage, as well as ingesting usage events and canceling usage events. SaaS admins can use these endpoints for managing the application metering.
The following endpoints are created in the control plane</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Create Meter: POST /meters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Update Meter: PUT /meters/{meterId}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ingest Usage: POST /ingest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cancel Usage: DELETE /usage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Fetch Usage: GET /usage/meterId</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here&#x27;s a brief overview of how this works:</p>
<ul>
<li>Meter Creation: SaaS admins can create meters through the create meter API in control plane or through the Amberflo UI.</li>
<li>Event Emission: Your application or service emits an ingest usage event with the necessary details to measure usage for a specific meter.</li>
<li>Lambda Invocation: The ingestUsageEventFunction of AmberfloMetering is invoked automatically upon receiving the event.</li>
<li>Data Processing: The Lambda function processes the event data and sends it to Amberflo for recording and subsequent usage analysis.</li>
<li>Fetch Usage: SaaS admins can fetch usage through the fetch usage API in control plane or through the Amberflo UI.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="contributing">Contributing<a href="#contributing" class="hash-link" aria-label="Direct link to Contributing" title="Direct link to Contributing">​</a></h2>
<p>We welcome contributions to improve the plugin! Please follow these steps:</p>
<ol>
<li>Fork the Repository: Click the &quot;Fork&quot; button on the repository page to create your own copy.</li>
<li>Create a Branch:
Create a new branch for your feature or bug fix
git checkout -b my-feature-branch</li>
<li>Make Changes: Implement your feature or bug fix while adhering to existing coding standards.</li>
<li>Write Tests: Add tests if applicable.</li>
<li>Commit Your Changes:
git commit -m &quot;Add feature X or fix issue Y&quot;</li>
<li>Push to Your Fork:
git push origin my-feature-branch</li>
<li>Submit a Pull Request: Open a pull request in the original repository with a clear description of your changes.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/awslabs/sbt-aws/blob/main/website/docs/partners/isv-integrations/amberflo.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sbt-aws/docs/category/isv-partner-integrations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ISV Partner Integrations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sbt-aws/docs/partners/isv-integrations/descope"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Descope</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#obtaining-the-plugin" class="table-of-contents__link toc-highlight">Obtaining the Plugin</a></li><li><a href="#installation-steps" class="table-of-contents__link toc-highlight">Installation Steps</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#add-amberflometering-to-your-control-plane" class="table-of-contents__link toc-highlight">Add AmberfloMetering to Your Control Plane</a></li><li><a href="#provision-a-meter" class="table-of-contents__link toc-highlight">Provision a Meter</a></li><li><a href="#update-a-meter" class="table-of-contents__link toc-highlight">Update a Meter</a></li><li><a href="#get-a-meter" class="table-of-contents__link toc-highlight">Get a Meter</a></li><li><a href="#list-all-meters" class="table-of-contents__link toc-highlight">List all Meters</a></li><li><a href="#delete-a-meter" class="table-of-contents__link toc-highlight">Delete a Meter</a></li><li><a href="#ingest-usage-events" class="table-of-contents__link toc-highlight">Ingest Usage Events</a></li><li><a href="#fetch-usage-data" class="table-of-contents__link toc-highlight">Fetch Usage Data</a></li><li><a href="#canceling-incorrect-usage-events" class="table-of-contents__link toc-highlight">Canceling incorrect usage events</a></li></ul></li><li><a href="#usage-examples" class="table-of-contents__link toc-highlight">Usage Examples</a></li><li><a href="#contributing" class="table-of-contents__link toc-highlight">Contributing</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/sbt-aws/blob/main/docs/public/README.md#tutorial" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tutorial<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Get Involved</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/awslabs/sbt-aws" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Built with ❤️ at AWS <br> © 2025 Amazon.com, Inc. or its affiliates. All Rights Reserved</div></div></div></footer></div>
</body>
</html>